#define SMOOTHING_TEST
#include "curves.cpp"

int main(int argc, char** argv)
{
    MatMxN points_laplace(2,30);
    points_laplace << 0.376475 , 0.387548 , 0.466229 , 0.303055 , 0.250934 , 0.294751 , 0.214791 , 0.166395 , 0.00701423 , 0.0415943 , 0.0104852 , -0.176334 , -0.177226 , -0.227728 , -0.160782 , -0.221594 , -0.22268 , -0.25713 , -0.10785 , -0.182855 , -0.118648 , 0.0225321 , 0.129901 , 0.147937 , 0.258356 , 0.26938 , 0.337109 , 0.376582 , 0.463463 , 0.386257 , 0.0694713 , 0.172512 , 0.216411 , 0.272685 , 0.262268 , 0.425643 , 0.420574 , 0.44522 , 0.381676 , 0.372452 , 0.40361 , 0.382397 , 0.268785 , 0.1582 , 0.0761772 , 0.0431858 , -0.0550878 , -0.0783158 , -0.121266 , -0.127056 , -0.177066 , -0.203835 , -0.275965 , -0.202489 , -0.249846 , -0.261858 , -0.238916 , -0.0812293 , -0.00731419 , -0.0442124;

    MatMxN points_osculating(2,30);
    points_osculating << 0.38646 , 0.402917 , 0.483335 , 0.305197 , 0.248196 , 0.304995 , 0.221704 , 0.171014 , -0.00507444 , -0.00126661 , 0.0101216 , -0.1875 , -0.188985 , -0.234231 , -0.179738 , -0.224312 , -0.243237 , -0.275517 , -0.103208 , -0.175982 , -0.127698 , 0.0199719 , 0.123323 , 0.156404 , 0.255057 , 0.303707 , 0.341589 , 0.387432 , 0.485043 , 0.398302 , 0.0700209 , 0.171606 , 0.227356 , 0.276563 , 0.268999 , 0.435328 , 0.443626 , 0.454159 , 0.396917 , 0.399357 , 0.410897 , 0.393622 , 0.275987 , 0.161479 , 0.0837335 , 0.0355463 , -0.0505545 , -0.090886 , -0.123375 , -0.136133 , -0.182625 , -0.214312 , -0.284459 , -0.216809 , -0.266363 , -0.265887 , -0.248602 , -0.0853258 , -0.0166367 , -0.0400787;

    MainWindow window1(argc, argv);
    window1.laplacianSmoothing(0.1);
    double dist1 = (window1.points - points_laplace).norm();

    MainWindow window2(argc, argv);
    window2.osculatingCircle(0.001);
    double dist2 = (window2.points - points_osculating).norm();

    std::cout << "Total distance to ground truth: " << (dist1 + dist2) << "." << std::endl;
    if (dist1 + dist2 < 1e-4) {
        std::cout << "TEST PASSED!" << std::endl;
    } else {
        std::cout << "TEST FAILED!" << std::endl;
    }
}
